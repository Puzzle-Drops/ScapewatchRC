<!DOCTYPE html>
<html lang="en">
<head>
    <script>
    window.scriptErrors = [];
    window.addEventListener('error', function(e) {
        if (e.filename && e.filename.includes('.js')) {
            window.scriptErrors.push({
                file: e.filename,
                line: e.lineno,
                col: e.colno,
                message: e.message
            });
        }
    });
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scapewatch</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Scaling wrapper contains everything -->
    <div id="game-wrapper" class="game-wrapper">
        <div id="scaled-container" class="scaled-container">
            <!-- Loading screen is now inside the scaled container -->
            <div id="loading-screen" class="loading-screen">
                <div class="loading-content">
                    <h1>Scapewatch</h1>
                    <div class="loading-bar">
                        <div class="loading-progress"></div>
                    </div>
                    <p class="loading-text">Loading assets...</p>
                </div>
            </div>

            <!-- Login Screen -->
<div id="login-screen" style="display: none;">
    <!-- Background map canvas -->
    <canvas id="login-background-canvas"></canvas>
    <div class="login-container">
        <div class="login-box">
            <h1 class="game-title">Scapewatch</h1>
            
            <div class="login-tabs">
                <button class="login-tab active" data-tab="login">Login</button>
                <button class="login-tab" data-tab="signup">Sign Up</button>
                <button class="login-tab" data-tab="forgot">Forgot Pass</button>
            </div>
            
            <form id="login-form" class="auth-form">
                <div class="form-group">
                    <input type="text" id="login-username" placeholder="Username" required>
                </div>
                <div class="form-group">
                    <input type="password" id="login-password" placeholder="Password" required>
                </div>
                <button type="submit" class="auth-btn">Login</button>
                <div class="auth-error" id="login-error"></div>
            </form>
            
            <form id="signup-form" class="auth-form" style="display: none;">
                <div class="form-group">
                    <input type="text" id="signup-username" placeholder="Username (3-16 characters)" 
                           pattern="[a-zA-Z0-9_]{3,16}" required>
                    <div class="username-hint">Letters, numbers, underscore only</div>
                </div>
                <div class="form-group">
                    <input type="email" id="signup-email" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" id="signup-password" placeholder="Password (6+ characters)" 
                           minlength="6" required>
                </div>
                <button type="submit" class="auth-btn">Create Account</button>
                <div class="auth-error" id="signup-error"></div>
            </form>
            
            <form id="forgot-form" class="auth-form" style="display: none;">
                <div class="form-group">
                    <input type="text" id="forgot-username" placeholder="Username" required>
                    <div class="username-hint">Enter your username to reset password</div>
                </div>
                <button type="submit" class="auth-btn">Send Reset Email</button>
                <div class="auth-success" id="forgot-success" style="display: none;"></div>
                <div class="auth-error" id="forgot-error"></div>
            </form>
            
            <div class="login-footer">
                <button id="play-offline-btn" class="offline-btn">Play Offline (No Saving)</button>
            </div>
        </div>
    </div>
</div>
      
            <!-- Game container -->
            <div id="game-container" class="game-container" style="display: none;">

                <!-- Floating Current Task Display -->
                <div id="floating-current-task" class="floating-current-task" style="display: none;">
                </div>

                <!-- Floating Completed Clues Display -->
                <div id="floating-completed-clues" class="floating-completed-clues">
                </div>
                
                <!-- Full screen map -->
                <div class="map-container">
                    <canvas id="game-canvas"></canvas>
                </div>
                
                <!-- Single UI Panel in bottom right -->
                <div class="ui-panel">

<!-- Panel selector buttons -->
<div class="panel-selector">
    <button class="panel-btn" data-panel="equipment" title="Equipment">
        <img src="assets/ui/equipment.png" alt="Equipment">
    </button>
    <button class="panel-btn" data-panel="skills" title="Skills">
        <img src="assets/ui/skills.png" alt="Skills">
    </button>
    <button class="panel-btn" data-panel="tasks" title="Tasks">
        <img src="assets/ui/tasks.png" alt="Tasks">
    </button>
    <button class="panel-btn active" data-panel="inventory" title="Inventory">
        <img src="assets/ui/inventory.png" alt="Inv">
    </button>
    <button class="panel-btn" data-panel="shop" title="Shop">
        <img src="assets/ui/shop.png" alt="Shop">
    </button>
    <button class="panel-btn" data-panel="bank" title="Bank">
        <img src="assets/ui/bank.png" alt="Bank">
    </button>
    <button class="panel-btn" data-panel="hiscores" title="Hiscores">
        <img src="assets/ui/hiscores.png" alt="Hiscores">
    </button>
</div>                    
                    <!-- Panel content area -->
                    <div class="panel-content">
                        <!-- Inventory Panel (default) -->
                        <div id="inventory-panel" class="panel active">
                            <div id="inventory-grid" class="inventory-grid"></div>
                        </div>
                        
                        <!-- Skills Panel -->
                        <div id="skills-panel" class="panel">
                            <div id="skills-list" class="skills-list"></div>
                        </div>
                        
                        <!-- Tasks Panel -->
                        <div id="tasks-panel" class="panel">
                            <div id="tasks-list" class="tasks-list"></div>
                        </div>

                        <!-- Shop Panel -->
                        <div id="shop-panel" class="panel">
                            <div id="shop-container" class="shop-container"></div>
                        </div>
                        
                        <!-- Equipment Panel -->
                        <div id="equipment-panel" class="panel">
                            <div id="equipment-container" class="equipment-container">
                                <!-- Equipment tabs for combat styles -->
                                <div class="equipment-tabs">
                                    <button class="equipment-tab active" data-style="melee">Melee</button>
                                    <button class="equipment-tab" data-style="ranged">Ranged</button>
                                    <button class="equipment-tab" data-style="magic">Magic</button>
                                </div>
                                <!-- Gear score display -->
                                <div class="equipment-gear-score">
                                    <span class="gear-score-label">Gear Score:</span>
                                    <span class="gear-score-value" id="gear-score-value">0</span>
                                </div>
                                <!-- Equipment slots grid -->
                                <div id="equipment-grid" class="equipment-grid"></div>
                            </div>
                        </div>
                        
                    </div>
                    
                </div>

                <!-- Bank Modal -->
<div id="bank-modal" class="modal" style="display: none;">
    <div class="modal-content">
        <button class="modal-close-x" id="bank-close-x">×</button>
        <div id="bank-grid" class="bank-grid"></div>
    </div>
</div>

                <!-- Casket Rewards Modal -->
                <div id="casket-rewards-modal" class="modal" style="display: none;">
                    <div class="modal-content casket-rewards-content">
                        <button class="modal-close-x" id="casket-close-x">×</button>
                        <div id="casket-header" class="casket-header"></div>
                        <div id="casket-rewards-grid" class="casket-rewards-grid"></div>
                    </div>
                </div>

<!-- Hiscores Modal -->
<div id="hiscores-modal" class="hiscores-modal" style="display: none;">
    <div class="hiscores-content">
        <button class="modal-close-x" id="hiscores-close-x">×</button>
        <div class="hiscores-layout">
            <!-- Left: Category list -->
            <div class="hiscores-categories" id="hiscores-categories"></div>
            <!-- Center: Leaderboard -->
            <div class="hiscores-leaderboard" id="hiscores-leaderboard"></div>
            <!-- Right: Search/Compare -->
            <div class="hiscores-controls" id="hiscores-controls"></div>
        </div>
    </div>
</div>
            </div>
        </div>
    </div>

    <!-- Load devConsole first to capture all console output -->
<script type="module" src="js/devConsole.js"></script>
<script type="module">
    console.log('Loading scripts...');
</script>
<script type="module" src="js/loadingManager.js"></script>
<script type="module" src="js/loginBackgroundMap.js"></script>
<script type="module" src="js/utils.js"></script>
<script type="module" src="js/scalingSystem.js"></script>
<script type="module" src="js/collision.js"></script>
<script type="module" src="js/pathfinding.js"></script>
<!-- Load skill system files -->
<script type="module" src="js/skills/base.js"></script>
<script type="module" src="js/skills/woodcutting.js"></script>
<script type="module" src="js/skills/mining.js"></script>
<script type="module" src="js/skills/fishing.js"></script>
<script type="module" src="js/skills/cooking.js"></script>
<script type="module" src="js/skills/agility.js"></script>
<script type="module" src="js/skills/sailing.js"></script>
<script type="module" src="js/skills/firemaking.js"></script>
<script type="module" src="js/skills/thieving.js"></script>
<script type="module" src="js/skills/runecrafting.js"></script>
<script type="module" src="js/skills/smithing.js"></script>
<script type="module" src="js/skills/fletching.js"></script>
<script type="module" src="js/skills/crafting.js"></script>
<script type="module" src="js/skills/construction.js"></script>
<script type="module" src="js/skills/herblore.js"></script>
<script type="module" src="js/skills/farming.js"></script>
<script type="module" src="js/skills/hunter.js"></script>
<script type="module" src="js/skills/combatSkill.js"></script>
<script type="module" src="js/skills/attack.js"></script>
<script type="module" src="js/skills/strength.js"></script>
<script type="module" src="js/skills/defence.js"></script>
<script type="module" src="js/skills/magic.js"></script>
<script type="module" src="js/skills/ranged.js"></script>
<script type="module" src="js/combatManager.js"></script>
<script type="module" src="js/shared_drop_tables.js"></script>
<script type="module" src="js/skillRegistry.js"></script>
<!-- Continue with other scripts -->
<script type="module" src="js/skills.js"></script>
<script type="module" src="js/xpDrops.js"></script>
<script type="module" src="js/runecred.js"></script>
<script type="module" src="js/inventory.js"></script>
<script type="module" src="js/bank.js"></script>
<script type="module" src="js/shop.js"></script>
<script type="module" src="js/tasks.js"></script>
<script type="module" src="js/player.js"></script>
<script type="module" src="js/playerAnimation.js"></script>
<script type="module" src="js/nodes.js"></script>
<script type="module" src="js/clues.js"></script>
<script type="module" src="js/map.js"></script>
<script type="module" src="js/ui.js"></script>
<script type="module" src="js/skillCustomization.js"></script>
<script type="module" src="js/ai.js"></script>
<script type="module" src="js/testScenario.js"></script>
<script type="module" src="js/firebase.js"></script>
<script type="module" src="js/hiScores.js"></script>
<script type="module" src="js/main.js"></script>
</body>
</html>
