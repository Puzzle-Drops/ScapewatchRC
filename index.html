<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Idle RPG</title>
    
    <!-- Firebase SDK (load these first) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-container">
            <h1 class="loading-title">Idle RPG</h1>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p class="loading-text">Loading game assets...</p>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="login-screen" style="display: none;">
        <div class="login-container">
            <div class="login-box">
                <h1 class="game-title">Idle RPG</h1>
                
                <div class="login-tabs">
                    <button class="login-tab active" data-tab="login">Login</button>
                    <button class="login-tab" data-tab="signup">Sign Up</button>
                </div>
                
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <input type="text" id="login-username" placeholder="Username" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="login-password" placeholder="Password" required>
                    </div>
                    <button type="submit" class="auth-btn">Login</button>
                    <div class="auth-error" id="login-error"></div>
                </form>
                
                <form id="signup-form" class="auth-form" style="display: none;">
                    <div class="form-group">
                        <input type="text" id="signup-username" placeholder="Username (3-16 characters)" 
                               pattern="[a-zA-Z0-9_]{3,16}" required>
                        <div class="username-hint">Letters, numbers, underscore only</div>
                    </div>
                    <div class="form-group">
                        <input type="email" id="signup-email" placeholder="Email" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="signup-password" placeholder="Password (6+ characters)" 
                               minlength="6" required>
                    </div>
                    <button type="submit" class="auth-btn">Create Account</button>
                    <div class="auth-error" id="signup-error"></div>
                </form>
                
                <div class="login-footer">
                    <button id="play-offline-btn" class="offline-btn">Play Offline (No Saving)</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Container -->
    <div id="game-wrapper">
        <div id="scaled-container">
            <div id="game-container" style="display: none;">
                <div class="map-container">
                    <canvas id="game-canvas"></canvas>
                </div>
                
                <div class="ui-panel">
                    <div class="panel-buttons">
                        <button class="panel-btn active" data-panel="inventory">Inventory</button>
                        <button class="panel-btn" data-panel="skills">Skills</button>
                        <button class="panel-btn" data-panel="tasks">Tasks</button>
                        <button class="panel-btn" data-panel="bank">Bank</button>
                        <button class="panel-btn" data-panel="shop">Shop</button>
                        <button class="panel-btn" id="pause-toggle" title="Pause AI">
                            <span class="pause-icon">‚è∏</span>
                        </button>
                    </div>
                    
                    <div class="panel-content">
                        <!-- Inventory Panel -->
                        <div id="inventory-panel" class="panel active">
                            <div id="inventory-grid" class="inventory-grid"></div>
                        </div>
                        
                        <!-- Skills Panel -->
                        <div id="skills-panel" class="panel">
                            <div id="skills-list" class="skills-list"></div>
                        </div>
                        
                        <!-- Tasks Panel -->
                        <div id="tasks-panel" class="panel">
                            <div id="tasks-list" class="tasks-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bank Modal -->
    <div id="bank-modal" class="modal" style="display: none;">
        <div class="modal-content bank-modal-content">
            <div class="modal-header">
                <h2>Bank</h2>
                <button class="modal-close" id="bank-close-x">&times;</button>
            </div>
            <div id="bank-grid" class="bank-grid"></div>
        </div>
    </div>

    <!-- Shop Modal -->
    <div id="shop-modal" class="modal" style="display: none;">
        <div class="modal-content shop-modal-content">
            <div class="modal-header">
                <h2>Shop</h2>
                <button class="modal-close" id="shop-close-x">&times;</button>
            </div>
            <div id="shop-items" class="shop-items"></div>
        </div>
    </div>

    <!-- Game Scripts (order matters) -->
    <script src="js/utils.js"></script>
    <script src="js/loadingManager.js"></script>
    <script src="js/scalingSystem.js"></script>
    <script src="js/collision.js"></script>
    <script src="js/pathfinding.js"></script>
    <script src="js/skills/base.js"></script>
    <script src="js/skills/woodcutting.js"></script>
    <script src="js/skills/mining.js"></script>
    <script src="js/skills/fishing.js"></script>
    <script src="js/skills/cooking.js"></script>
    <script src="js/skills/agility.js"></script>
    <script src="js/skills/sailing.js"></script>
    <script src="js/skills/firemaking.js"></script>
    <script src="js/skills/thieving.js"></script>
    <script src="js/skills/runecrafting.js"></script>
    <script src="js/skills/smithing.js"></script>
    <script src="js/skills/fletching.js"></script>
    <script src="js/skills/crafting.js"></script>
    <script src="js/skills/construction.js"></script>
    <script src="js/skills/herblore.js"></script>
    <script src="js/skills/farming.js"></script>
    <script src="js/skills/hunter.js"></script>
    <script src="js/skillRegistry.js"></script>
    <script src="js/skills.js"></script>
    <script src="js/runecred.js"></script>
    <script src="js/inventory.js"></script>
    <script src="js/bank.js"></script>
    <script src="js/shop.js"></script>
    <script src="js/tasks.js"></script>
    <script src="js/player.js"></script>
    <script src="js/playerAnimation.js"></script>
    <script src="js/nodes.js"></script>
    <script src="js/map.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/skillCustomization.js"></script>
    <script src="js/ai.js"></script>
    <script src="js/devConsole.js"></script>
    <script src="js/firebase.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
